function showInfo(a,e){allRows=_.sortBy(e.sheets("Completed Detailed Data").all(),"Department");var t=new URI,n=t.search(!0);if(n){var r=[];r.push(buildDepartmentFilter(n.department)),r.push(buildDatatypeFilter(n.datatype)),updateCards(allRows,_.compact(r))}else updateCards(allRows);updateDepartments(_.chain(allRows).map(function(a){return a.Department}).unique().map(function(a){return{Department:a}}).value()),updateTypesOfData(_.chain(allRows).map(function(a){return a["Type of Data"]}).unique().map(function(a){return{"Type of Data":a}}).value())}function updateCards(a,e){var e=e||[],t=$("#card-template").html(),n=Handlebars.compile(t);_.chain(a).filter(function(a){return _.all(e,function(e){return e(a)})}).map(function(a){var e=n(a);$("#cards").append(e)})}function buildDepartmentFilter(a){return a?function(e){return e.Department===a}:!1}function buildDatatypeFilter(a){return a?function(e){return e["Type of Data"]===a}:!1}function updateDepartments(a){var e=$("#department-template").html(),t=Handlebars.compile(e);$.each(a,function(a,e){var n=t(e);$(n).appendTo("#departments")})}function clearCards(){$("#cards").empty()}function filterByDepartment(a){clearCards(),updateCards(allRows,[buildDepartmentFilter(a)])}function resetSearch(){clearCards(),updateCards(allRows)}function filterByDatatype(a){clearCards(),updateCards(allRows,[buildDatatypeFilter(a)])}function filterByMachineReadable(a){clearCards(),updateCards(_.filter(allRows,function(e){return a?"Yes"===e["Data is machine readable"]:"No"===e["Data is machine readable"]}))}function updateTypesOfData(a){var e=$("#datatype-template").html(),t=Handlebars.compile(e);$.each(a,function(a,e){var n=t(e);$(n).appendTo("#datatypes")})}$(document).ready(function(){Tabletop.init({key:"1lv74SigFdFMJvza_dc2tBVd37r9E4-CPeY9YkRSaBxA",callback:showInfo,parseNumbers:!0})});var allRows=[];