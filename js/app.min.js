function showInfo(a,e){allRows=_.sortBy(e.sheets("Completed Data").all(),"City"),updateCards(allRows),updateDepartments(_.chain(allRows).map(function(a){return a.City}).unique().map(function(a){return{City:a}}).value()),updateTypesOfData(_.chain(allRows).map(function(a){return a["Type of Data"]}).unique().map(function(a){return{"Type of Data":a}}).value())}function updateCards(a){var e=$("#card-template").html(),t=Handlebars.compile(e);$.each(a,function(a,e){var n=t(e);$("#cards").append(n)})}function updateDepartments(a){var e=$("#department-template").html(),t=Handlebars.compile(e);$.each(a,function(a,e){var n=t(e);$(n).appendTo("#departments")})}function clearCards(){$("#cards").empty()}function filterByDepartment(a){clearCards(),updateCards(_.filter(allRows,function(e){return e.City===a}))}function resetSearch(){clearCards(),updateCards(allRows)}function filterByDatatype(a){clearCards(),updateCards(_.filter(allRows,function(e){return e["Type of Data"]===a}))}function filterByMachineReadable(a){clearCards(),updateCards(_.filter(allRows,function(e){return a?"Yes"===e["Machine Readable?"]:"No"===e["Machine Readable?"]}))}function updateTypesOfData(a){var e=$("#datatype-template").html(),t=Handlebars.compile(e);$.each(a,function(a,e){var n=t(e);$(n).appendTo("#datatypes")})}$(document).ready(function(){Tabletop.init({key:"1lv74SigFdFMJvza_dc2tBVd37r9E4-CPeY9YkRSaBxA",callback:showInfo,parseNumbers:!0})});var allRows=[];