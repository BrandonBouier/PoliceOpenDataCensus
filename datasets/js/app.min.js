function showInfo(a,e){allRows=_.sortBy(e.sheets("Completed Detailed Data").all(),"Department");var t=new URI,r=t.search(!0);if(r){var n=[];n.push(buildDepartmentFilter(r.department)),n.push(buildDatatypeFilter(r.datatype)),updateCards(allRows,_.compact(n))}else updateCards(allRows)}function updateCards(a,e){var e=e||[],t=$("#card-template").html(),r=Handlebars.compile(t);_.chain(a).filter(function(a){return _.all(e,function(e){return e(a)})}).map(function(a){var e=r(a);$("#cards").append(e)})}function buildDepartmentFilter(a){return a?function(e){return e.Department===a}:!1}function buildDatatypeFilter(a){return a?function(e){return e["Type of Data"]===a}:!1}function clearCards(){$("#cards").empty()}function filterByDepartment(a){clearCards(),updateCards(allRows,[buildDepartmentFilter(a)])}function resetSearch(){clearCards(),updateCards(allRows)}function filterByDatatype(a){clearCards(),updateCards(allRows,[buildDatatypeFilter(a)])}function filterByMachineReadable(a){clearCards(),updateCards(_.filter(allRows,function(e){return a?"Yes"===e["Data is machine readable"]:"No"===e["Data is machine readable"]}))}$(document).ready(function(){Tabletop.init({key:"1lv74SigFdFMJvza_dc2tBVd37r9E4-CPeY9YkRSaBxA",callback:showInfo,parseNumbers:!0})});var allRows=[];